# g2y - GPT | searching | recognize

## Описание
Это - телеграм бот созданный для бесплатного и безлимитного (в рамках подписки) общения с **GPT**. Написан с максимальным использованием ассинхронности.

### Основные возможности
После запуска бота будут возможности:
- *Задавать вопросы GPT* с помощью команды `/q` в телеграм чате с ботом
- *Распознавать текст* с изображений с помощью команды `/r` 
- *Решать тесты* с помощью GPT и команды `/t`. После ввода команды можно будет выбрать что должно отображаться при решении вопроса. Отправлять в этом режиме *лучше* всего *скриншоты* с которых будет распознан текст и передан в GPT.
- - 1 этап - это запрос к GPT и ожидание его решения 
- - 2 этап - это запрос выдачи Яндекса по этому вопросу и отображение результатов в чате
- - 3 этап - это повторный запрос к GPT с поисковой выдачей Яндекса, вследствии чего качество ответа улучшается
- Получить информацию о текщей подписке командой `/sub`

### Технологии

#### Общие:
- **Docker** - необходим для создания Python образа
- **docker-compose** - нужен для одновременного запуска всех нужных сервисов одной командой

#### Бот:
- **aiogram** - главная библиотека для ассинхронного взаимодействия с TelegramBotAPI
- **PostgreSQL** - основная база данных для хранения основных записей
- **MongoDB** - база данных для хранения истории взаимодействия
- **SQLAlchemy** - ORM использована из-за присутствия ассинхронности
- **tesseract** - для распознавания текста с изображений
- **Redis** - необходим для хранения машины состояния бота и работы Celery 
- **Celery** - нужно для переодических рассылок пользоваетлям (например когда заканчиавается подписка)

#### Админки:
- Для MongoDB:
- - **Flask** - нужен для запуска основного приложения
- - **Flask_admin** - для создания приложения админки
- - **WTForms** - для создания формы отображения

- Для PostgreSQL:
- - **FastAPI** - запуск основного приложения админки
- - **SQLAdmin** - добавление отображения таблиц
- - **uvicorn** - для запуска FastAPI приложения

## Запуск

1) Установка docker и docker-compose  
```bash
sudo apt install docker docker-compose
```  
2) Склонировать репозиторий и войти в директорию:  
```bash
git clone https://github.com/artem-git-hub/g2y.git
cd g2y
```  
3) Переименовать файл `.env-prod-template` в `.env` и заполнить своими данными.
4) Изменить нужные данные в файле `tgbot/settings.py`
5) Запустить контейнеры:
```bash
sudo docker-compose up --build
```